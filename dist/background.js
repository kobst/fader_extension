(()=>{var t={};chrome.storage.local.get("tabData",(function(a){console.log("get data from storage"),t=a.tabData?a.tabData:{}})),chrome.tabs.query({},(function(a){for(var e=0;e<a.length;e++){var o=a[e];t[o.id]={url:{},active:[]},t[o.id].url[o.url]=Date().toString()}console.log("update tabData onQuery"),chrome.storage.local.set({tabData:t})})),chrome.tabs.onActivated.addListener((function(a){var e=a.tabId;t[e]||(t[e]={url:{},active:[]}),t[e].active.push(Date().toString()),console.log("update tabData onActivated"),chrome.storage.local.set({tabData:t})})),chrome.tabs.onUpdated.addListener((function(a,e,o){e.url&&(t[a]||(t[a]={url:{},active:[]}),t[a].url[e.url]=Date().toString(),console.log("update tabData onUpdated"),chrome.storage.local.set({tabData:t}))})),chrome.tabs.onRemoved.addListener((function(a,e){delete t[a],chrome.storage.local.set({tabData:t})}))})();